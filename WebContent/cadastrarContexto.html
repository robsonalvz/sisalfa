<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="_css/estilo.css">
	<title>Cadastrar Contexto</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
		<script>
			$(document).ready(function() {
				$('#btnEnviar').click(function(event) {
					$.ajax({
						url : 'http://localhost:8080/Sisalfa/addContext',
						type : 'POST',	
						data: JSON.stringify({					
	    					nome: $('#nome').val(),
	    					idUsuario: $('select option:selected').val(),
	    					imagem: $('#imagem').val(),
	    					som: $('#som').val(),
	    					video: $('#video').val()
    					}),
    					contentType : "application/json; charset=utf-8",
    					dataType : 'json',
    					success: function () {
    	    				alert("Contextos enviados com sucesso!");
                			window.location = "http://localhost:8080/Sisalfa/sucesso.html";
             			}
					});
				});	
			});
		</script>
		<script>
		$(document).ready(function(){
			$.getJSON("http://localhost:8080/Sisalfa/getAllUsers", function(result){
				$.each(result, function(indice, value){
					$("#users").append('<option>' + value.id + '</option>'
					);	
				});
			});
		});
	
	</script>
	
</head>
<body id="corpo">
	<nav>
	<a href="">S i s a l f a</a>
		<ul>
			<li><a href="index.html">Inicio</a></li>
			<li><a href="listarContexto.jsp">Contextos</a></li>
			<li><a href="listarDesafio.jsp">Desafios</a></li>
			<li><a href="cadastrarUsuario.html">Usuario</a></li>
			<li><a href="sobre.html">Sobre</a></li>
		</ul>
	</nav>
	<form class="formulario" method="POST"enctype="multipart/form-data"> 
		<section id="conteudo">
			<h3>Novo Contexto</h3>
			<div>
				<label>Nome:</label> 
				<input placeholder="Digite o nome do contexto..." type="text" id="nome"name="nome" /><br /> 
			</div>

			<div>
			<label>Usuario:</label> 
				<select id="users">
				</select>
			</div>

			<div>
				<label>Imagem:</label> 
				<input type="text" id="imagem" name="fileImagem" size="60" /><br />	
			</div>

			<div>
				<label>Som:</label>  
				<input type="text" id="som"name="fileSom" size="60" /><br />	
			</div>

			<div>
				<label>Video:</label>  
				<input type="text" id="video"name="fileVideo" size="60" /><br />	
			</div>
		</section>
		<div id="div2"></div>
		<input type="submit" class="botao"id="btnEnviar"value="Gravar" />
	</form >  
	
	<div id="teste"></div>
</body>
</html>